(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{28:function(t,e,a){t.exports=a(43)},33:function(t,e,a){},43:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(18),c=a.n(i),u=(a(33),a(22)),o=a(3),s=a(4),l=a(7),d=a(6),m=a(5),p=a(15),h=a(2),f=a(13),v=a.n(f),b=a(17);function y(){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(v.a.mark((function t(){var e,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return e=t.sent,t.next=5,e.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t,e){return I.apply(this,arguments)}function I(){return(I=Object(b.a)(v.a.mark((function t(e,a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(e,"&q=").concat(a));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var j=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={status:"loading",categories:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=Object(b.a)(v.a.mark((function t(){var e=this;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",y().then((function(t){return e.setState({categories:t,status:""})})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.filterId,e=this.state,a=e.categories;return"loading"===e.status?r.a.createElement("div",null,"Loading ..."):r.a.createElement("div",null,"Categorias:",a.map((function(e){var a=e.id,n=e.name;return r.a.createElement("div",{key:a},r.a.createElement("label",{htmlFor:n},r.a.createElement("input",{"data-testid":"category",type:"radio",name:"filters",onClick:function(){return t(a)}}),n))})))}}]),a}(n.Component),O=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.result,a=t.response,n=t.addToCart,i=t.handleCartItemsQuantity;return a?r.a.createElement("div",null,"Nenhum produto foi encontrado"):e.map((function(t){var e=t.title,a=t.thumbnail,c=t.price,u=t.id,o=t.available_quantity,s=t.shipping.free_shipping;return r.a.createElement("div",{"data-testid":"product",key:u},r.a.createElement("h4",null,e),r.a.createElement("img",{src:a,alt:e}),r.a.createElement("p",null,"R$ ".concat(c)),r.a.createElement("p",null,"Quantidade em estoque:",o),s&&r.a.createElement("h4",{"data-testid":"free-shipping"},"Frete gr\xe1tis"),r.a.createElement(p.b,{"data-testid":"product-detail-link",to:{pathname:"/".concat(u,"/detalhes"),state:{detalhes:{id:u,price:c,thumbnail:a,title:e,availableQuantity:o,freeShipping:s}}}},"Ver detalhes"),r.a.createElement("button",{"data-testid":"product-add-to-cart",type:"button",onClick:function(t){n({title:e,thumbnail:a,price:c,id:u,availableQuantity:o,freeShipping:s},t),i(1)}},"Adicionar ao carrinho"))}))}}]),a}(n.Component);O.defaultProps={result:[]};var k=O,C=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).state={searchbar:"",response:[],emptyResponse:!1,filterId:""},t.handleClick=t.handleClick.bind(Object(l.a)(t)),t.filterById=t.filterById.bind(Object(l.a)(t)),t}return Object(s.a)(a,[{key:"handleClick",value:function(){var t=Object(b.a)(v.a.mark((function t(){var e,a,n=this;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.state,a=e.searchbar,g(e.filterId,a).then((function(t){var e=t.results;a.length>0&&0===e.length?n.setState({emptyResponse:!0}):n.setState({emptyResponse:!1,response:e})}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"filterById",value:function(t){var e=this;this.setState({filterId:t},(function(){return e.handleClick()}))}},{key:"render",value:function(){var t=this,e=this.state,a=e.response,n=e.emptyResponse,i=this.props,c=i.addToCart,u=i.handleCartItemsQuantity,o=i.cartItemsQuantity;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",null,r.a.createElement("input",{"data-testid":"query-input",onChange:function(e){return t.setState({searchbar:e.target.value})}}),r.a.createElement("button",{"data-testid":"query-button",type:"button",onClick:this.handleClick},"Pesquisar"),r.a.createElement(p.b,{"data-testid":"shopping-cart-button",to:"/carrinho"},r.a.createElement("i",{className:"fas fa-shopping-cart"}),r.a.createElement("span",{"data-testid":"shopping-cart-size"},o))),r.a.createElement("section",null,r.a.createElement("p",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria.")),r.a.createElement("section",null,r.a.createElement(j,{filterId:this.filterById,handleCartItemsQuantity:u})),r.a.createElement("section",null,r.a.createElement(k,{result:a,response:n,addToCart:c,handleCartItemsQuantity:u})))}}]),a}(r.a.Component),Q=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={quantity:1,itemTotalPrice:t.productInfo.price},n.increaseQuantity=n.increaseQuantity.bind(Object(l.a)(n)),n.decreaseQuantity=n.decreaseQuantity.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"increaseQuantity",value:function(t,e){var a=this.props.productInfo.availableQuantity,n=this.state.quantity;n===a?e.target.disabled=!0:this.setState((function(e){var a=e.itemTotalPrice;return{quantity:n+1,itemTotalPrice:a+t}}))}},{key:"decreaseQuantity",value:function(t){var e=this.props,a=e.productInfo.title,n=e.removeProduct,r=this.state.quantity;if(1===r)return n(a);this.setState((function(e){var a=e.itemTotalPrice;return{quantity:r-1,itemTotalPrice:a-t}}))}},{key:"render",value:function(){var t=this,e=this.props,a=e.productInfo,n=a.title,i=a.thumbnail,c=a.price,u=a.availableQuantity,o=a.freeShipping,s=e.removeProduct,l=e.handleCartItemsQuantity,d=this.state.quantity;return r.a.createElement("div",{"data-testid":"product"},r.a.createElement("h4",{"data-testid":"shopping-cart-product-name"},n),r.a.createElement("button",{type:"button",onClick:function(){return s(n)}},"X"),r.a.createElement("div",null,r.a.createElement("img",{src:i,alt:n})),r.a.createElement("p",null,"R$ ".concat(c*d)),r.a.createElement("p",null,"Quantidade em estoque:",u),o&&r.a.createElement("h4",{"data-testid":"free-shipping"},"Frete gr\xe1tis"),r.a.createElement("button",{"data-testid":"product-increase-quantity",type:"button",onClick:function(e){t.increaseQuantity(c,e),l(1)}},"+"),r.a.createElement("span",{"data-testid":"shopping-cart-product-quantity"},d),r.a.createElement("button",{"data-testid":"product-decrease-quantity",type:"button",onClick:function(){t.decreaseQuantity(c),l(-1)}},"-"))}}]),a}(n.Component);Q.defaultProps={productInfo:{}};var S=Q,T=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.products,a=t.removeProduct,n=t.handleCartItemsQuantity;return e.length>0?r.a.createElement("section",null,e.map((function(t){return r.a.createElement(S,{key:t.id,productInfo:t,removeProduct:a,handleCartItemsQuantity:n})})),r.a.createElement(p.b,{to:"/checkout","data-testid":"checkout-products"}," Finalizar Compra ")):r.a.createElement("section",null,r.a.createElement("span",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"))}}]),a}(r.a.Component);T.defaultProps={products:[]};var q=T,w=a(56),x=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).state={value:null},t.userRating=t.userRating.bind(Object(l.a)(t)),t}return Object(s.a)(a,[{key:"userRating",value:function(t){this.setState({value:Number(t.target.value)})}},{key:"render",value:function(){var t=this.state.value;return r.a.createElement("form",null,r.a.createElement("h3",null," Avalia\xe7\xe3o "),r.a.createElement("fieldset",null,r.a.createElement("input",{type:"text",placeholder:"Email"}),r.a.createElement(w.a,{name:"user-rating",value:t,onClick:this.userRating}),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"user-email"},r.a.createElement("textarea",{"data-testid":"product-detail-evaluation",cols:"30",rows:"5",maxLength:"1000",placeholder:"Mensagem (opcional)"})))))}}]),a}(n.Component),P=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.addToCart,a=t.handleCartItemsQuantity,n=t.cartItemsQuantity,i=t.location.state.detalhes,c=i.id,u=i.price,o=i.thumbnail,s=i.title,l=i.availableQuantity,d=i.freeShipping;return r.a.createElement("div",{"data-testid":"product",key:c},r.a.createElement(p.b,{"data-testid":"shopping-cart-button",to:"/carrinho"},r.a.createElement("i",{className:"fas fa-shopping-cart"}),r.a.createElement("span",{"data-testid":"shopping-cart-size"},n)),r.a.createElement("h4",{"data-testid":"product-detail-name"},s),r.a.createElement("img",{src:o,alt:s}),r.a.createElement("p",null,"R$ ".concat(u)),r.a.createElement("p",null,"Quantidade em estoque:",l),d&&r.a.createElement("h4",{"data-testid":"free-shipping"},"Frete gr\xe1tis"),r.a.createElement("button",{"data-testid":"product-detail-add-to-cart",type:"button",onClick:function(t){e({title:s,thumbnail:o,price:u,id:c,availableQuantity:l},t),a(1)}},"Adicionar ao carrinho"),r.a.createElement(x,null))}}]),a}(r.a.Component),R=a(24),F=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).state={fullname:"",email:"",cpf:"",phone:"",cep:"",address:""},t.userInfoState=t.userInfoState.bind(Object(l.a)(t)),t}return Object(s.a)(a,[{key:"userInfoState",value:function(t,e){var a=e.target.value;this.setState(Object(R.a)({},t,a))}},{key:"productsInfo",value:function(){var t=this.props.products;return r.a.createElement("fieldset",null,r.a.createElement("h3",null,"Revise seus produtos"),t.map((function(t){var e=t.id,a=t.thumbnail,n=t.title,i=t.price,c=t.freeShipping;return r.a.createElement("div",{key:e},r.a.createElement("h4",{"data-testid":"shopping-cart-product-name"},n),r.a.createElement("img",{src:a,alt:n}),r.a.createElement("span",null,"R$ ".concat(i)),c&&r.a.createElement("h4",{"data-testid":"free-shipping"},"Frete gr\xe1tis"))})))}},{key:"userInfo",value:function(t,e){var a=this;return r.a.createElement("label",{htmlFor:"".concat(t)},r.a.createElement("input",{type:"text","data-testid":"checkout-".concat(t),placeholder:"".concat(e),onChange:function(e){return a.userInfoState(t,e)}}))}},{key:"render",value:function(){var t=this.state,e=t.fullname,a=t.email,n=t.cpf,i=t.phone,c=t.cep,u=t.address;return console.log(e,a,n,i,c,u),r.a.createElement("section",null,r.a.createElement("form",null,this.productsInfo(),r.a.createElement("fieldset",null,r.a.createElement("h3",null,"Informa\xe7\xf5es do comprador"),this.userInfo("fullname","Nome Completo"),this.userInfo("email","Email"),this.userInfo("cpf","CPF"),this.userInfo("phone","Telefone"),this.userInfo("cep","CEP"),this.userInfo("address","Endere\xe7o"),r.a.createElement("button",{type:"button"},"Comprar"))))}}]),a}(r.a.Component),B=F;F.defaultProps={products:[]};var N=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={cartItems:[],cartItemsQuantity:Number(localStorage.cartItemsQuantity)||0},n.addToCart=n.addToCart.bind(Object(l.a)(n)),n.removeItem=n.removeItem.bind(Object(l.a)(n)),n.updateTotalItems=n.updateTotalItems.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"addToCart",value:function(t){var e=this.state.cartItems;if(e.length>0)return e.every((function(e){return e.id!==t.id}))&&this.setState({cartItems:[].concat(Object(u.a)(e),[t])});this.setState({cartItems:[].concat(Object(u.a)(e),[t])})}},{key:"updateTotalItems",value:function(t){var e=this;this.setState((function(e){return{cartItemsQuantity:e.cartItemsQuantity+Number(t)}}),(function(){var t=e.state.cartItemsQuantity;localStorage.setItem("cartItemsQuantity",Number(t))}))}},{key:"removeItem",value:function(t){var e=this.state.cartItems,a=e.find((function(e){return e.title===t}));e.splice(e.indexOf(a),1),this.setState({cartItems:e})}},{key:"render",value:function(){var t=this,e=this.state,a=e.cartItems,n=e.cartItemsQuantity;return r.a.createElement("main",null,r.a.createElement(p.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/carrinho",render:function(){return r.a.createElement(q,{products:a,removeProduct:t.removeItem,handleCartItemsQuantity:t.updateTotalItems})}}),r.a.createElement(h.a,{path:"/checkout",render:function(){return r.a.createElement(B,{products:a})}}),r.a.createElement(h.a,{path:"/:id/detalhes",render:function(e){return r.a.createElement(P,Object.assign({},e,{addToCart:t.addToCart,handleCartItemsQuantity:t.updateTotalItems,cartItemsQuantity:n}))}}),r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(C,{cartItemsQuantity:n,addToCart:t.addToCart,handleCartItemsQuantity:t.updateTotalItems})}}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.b45713c6.chunk.js.map